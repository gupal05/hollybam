<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org" lang="ko">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>ì¿ í° ìƒì„± - HOLLYBAM</title>

  <!-- ê´€ë¦¬ì ì‚¬ì´ë“œë°” CSS/JS -->
  <link rel="stylesheet" href="/css/adminSidebar.css">
  <script src="/js/adminSidebar.js"></script>

  <style>
    body {
      font-family: 'Helvetica Neue', Arial, sans-serif;
      background: #f8f9fa;
      color: #212529;
      line-height: 1.6;
      margin: 0;
      padding: 0;
    }

    /* í—¤ë” */
    .header {
      background: #fff;
      border-bottom: 1px solid #e9ecef;
      padding: 0 40px;
      height: 80px;
      display: flex;
      align-items: center;
      justify-content: flex-end;
      position: sticky;
      top: 0;
      z-index: 100;
    }

    .header-actions {
      display: flex;
      align-items: center;
      gap: 20px;
    }

    .admin-info {
      color: #6c757d;
      font-size: 13px;
      font-weight: 300;
    }

    .logout-btn {
      background: #fff;
      color: #212529;
      border: 1px solid #212529;
      padding: 8px 16px;
      font-size: 11px;
      text-transform: uppercase;
      letter-spacing: 1px;
      cursor: pointer;
      transition: all 0.3s ease;
    }

    .logout-btn:hover {
      background: #212529;
      color: #fff;
    }

    /* ì»¨í…Œì´ë„ˆ - 2ì»¬ëŸ¼ ë ˆì´ì•„ì›ƒ */
    .container {
      max-width: 1400px;
      margin: 0 auto;
      padding: 40px 20px;
      display: grid;
      grid-template-columns: 1fr 1fr;
      gap: 40px;
    }

    /* í˜ì´ì§€ íƒ€ì´í‹€ */
    .page-title {
      grid-column: 1 / -1;
      margin-bottom: 20px;
    }

    .page-title h2 {
      color: #212529;
      font-size: 28px;
      font-weight: 300;
      margin-bottom: 8px;
      letter-spacing: 1px;
    }

    .page-title p {
      color: #6c757d;
      font-size: 14px;
      font-weight: 300;
    }

    /* ì™¼ìª½ ì»¬ëŸ¼ - ì¿ í° ìƒì„± í¼ */
    .create-section {
      display: flex;
      flex-direction: column;
      gap: 20px;
    }

    /* ì˜¤ë¥¸ìª½ ì»¬ëŸ¼ - ì¿ í° ë¦¬ìŠ¤íŠ¸ */
    .list-section {
      display: flex;
      flex-direction: column;
      gap: 20px;
    }

    /* ì„¹ì…˜ ê³µí†µ ìŠ¤íƒ€ì¼ */
    .section {
      background: #fff;
      border: 1px solid #e9ecef;
    }

    .section-header {
      padding: 30px 40px;
      border-bottom: 1px solid #e9ecef;
      display: flex;
      justify-content: space-between;
      align-items: center;
    }

    .section-title {
      color: #212529;
      font-size: 18px;
      font-weight: 300;
      letter-spacing: 0.5px;
      margin: 0;
    }

    .section-body {
      padding: 30px 40px;
    }

    /* í¼ ìŠ¤íƒ€ì¼ */
    .form-group {
      margin-bottom: 25px;
    }

    .form-group label {
      display: block;
      color: #212529;
      font-size: 13px;
      font-weight: 400;
      margin-bottom: 8px;
      text-transform: uppercase;
      letter-spacing: 0.5px;
    }

    .form-group input,
    .form-group select,
    .form-group textarea {
      width: 100%;
      padding: 12px 15px;
      border: 1px solid #e9ecef;
      font-size: 14px;
      font-weight: 300;
      transition: all 0.3s ease;
      background: #fff;
      box-sizing: border-box;
    }

    .form-group input:focus,
    .form-group select:focus,
    .form-group textarea:focus {
      outline: none;
      border-color: #212529;
    }

    .form-group textarea {
      height: 100px;
      resize: vertical;
    }

    .checkbox-group {
      display: flex;
      align-items: center;
      padding: 15px;
      border: 1px solid #e9ecef;
      cursor: pointer;
      transition: all 0.3s ease;
    }

    .checkbox-group:hover {
      border-color: #212529;
    }

    .checkbox-group.checked {
      background: #f8f9fa;
      border-color: #212529;
    }

    .checkbox-group input[type="checkbox"] {
      margin-right: 10px;
      width: auto;
    }

    /* ë²„íŠ¼ ìŠ¤íƒ€ì¼ */
    .btn {
      padding: 12px 24px;
      font-size: 11px;
      text-transform: uppercase;
      letter-spacing: 1px;
      cursor: pointer;
      transition: all 0.3s ease;
      border: 1px solid;
      font-weight: 400;
    }

    .btn-primary {
      background: #212529;
      color: #fff;
      border-color: #212529;
    }

    .btn-primary:hover {
      background: #000;
    }

    .btn-secondary {
      background: #6c757d;
      color: #fff;
      border-color: #6c757d;
    }

    .btn-secondary:hover {
      background: #5a6268;
    }

    .btn-outline {
      background: transparent;
      color: #212529;
      border-color: #212529;
    }

    .btn-outline:hover {
      background: #212529;
      color: #fff;
    }

    .btn-danger {
      background: #dc3545;
      color: #fff;
      border-color: #dc3545;
    }

    .btn-danger:hover {
      background: #c82333;
    }

    .btn-sm {
      padding: 6px 12px;
      font-size: 10px;
    }

    /* í¼ ì•¡ì…˜ */
    .form-actions {
      background: #f8f9fa;
      padding: 30px 40px;
      display: flex;
      justify-content: flex-end;
      gap: 15px;
      border-top: 1px solid #e9ecef;
    }

    .help-text {
      color: #6c757d;
      font-size: 12px;
      font-weight: 300;
      margin-top: 8px;
    }

    /* ê²€ìƒ‰ ë° í•„í„° ì˜ì—­ */
    .list-controls {
      display: flex;
      gap: 15px;
      align-items: center;
      margin-bottom: 20px;
    }

    .search-box {
      flex: 1;
      position: relative;
    }

    .search-box input {
      width: 100%;
      padding: 10px 40px 10px 15px;
      border: 1px solid #e9ecef;
      font-size: 13px;
    }

    .search-box .search-icon {
      position: absolute;
      right: 15px;
      top: 50%;
      transform: translateY(-50%);
      color: #6c757d;
    }

    .filter-dropdown {
      min-width: 150px;
    }

    .filter-dropdown select {
      padding: 10px 15px;
      border: 1px solid #e9ecef;
      font-size: 13px;
      background: #fff;
    }

    /* ì¿ í° ë¦¬ìŠ¤íŠ¸ */
    .coupon-list {
      display: flex;
      flex-direction: column;
      gap: 15px;
    }

    .coupon-item {
      border: 1px solid #e9ecef;
      padding: 20px;
      transition: all 0.3s ease;
      background: #fff;
    }

    .coupon-item:hover {
      border-color: #212529;
      box-shadow: 0 2px 10px rgba(0,0,0,0.1);
    }

    .coupon-header {
      display: flex;
      justify-content: space-between;
      align-items: flex-start;
      margin-bottom: 15px;
    }

    .coupon-title {
      font-size: 16px;
      font-weight: 400;
      color: #212529;
      margin-bottom: 5px;
    }

    .coupon-id {
      font-size: 12px;
      color: #6c757d;
      font-family: 'Courier New', monospace;
    }

    .coupon-status {
      padding: 4px 8px;
      font-size: 10px;
      text-transform: uppercase;
      letter-spacing: 0.5px;
      font-weight: 400;
    }

    .status-active {
      background: #d4edda;
      color: #155724;
    }

    .status-expired {
      background: #f8d7da;
      color: #721c24;
    }

    .status-disabled {
      background: #d6d8db;
      color: #495057;
    }

    .coupon-details {
      display: grid;
      grid-template-columns: repeat(2, 1fr);
      gap: 15px;
      margin-bottom: 15px;
      font-size: 13px;
    }

    .detail-item {
      display: flex;
      justify-content: space-between;
    }

    .detail-label {
      color: #6c757d;
      font-weight: 300;
    }

    .detail-value {
      color: #212529;
      font-weight: 400;
    }

    .coupon-description {
      font-size: 13px;
      color: #6c757d;
      margin-bottom: 15px;
      line-height: 1.5;
    }

    .coupon-actions {
      display: flex;
      gap: 10px;
      justify-content: flex-end;
    }

    /* í˜ì´ì§€ë„¤ì´ì…˜ */
    .pagination {
      display: flex;
      justify-content: center;
      align-items: center;
      gap: 10px;
      margin-top: 30px;
    }

    .pagination button {
      padding: 8px 12px;
      border: 1px solid #e9ecef;
      background: #fff;
      color: #6c757d;
      font-size: 12px;
      cursor: pointer;
      transition: all 0.3s ease;
    }

    .pagination button:hover {
      border-color: #212529;
      color: #212529;
    }

    .pagination button.active {
      background: #212529;
      color: #fff;
      border-color: #212529;
    }

    .pagination button:disabled {
      opacity: 0.5;
      cursor: not-allowed;
    }

    /* í†µê³„ ì¹´ë“œ */
    .stats-grid {
      display: grid;
      grid-template-columns: repeat(3, 1fr);
      gap: 15px;
      margin-bottom: 20px;
    }

    .stat-card {
      background: #fff;
      border: 1px solid #e9ecef;
      padding: 20px;
      text-align: center;
    }

    .stat-number {
      font-size: 24px;
      font-weight: 300;
      color: #212529;
      margin-bottom: 5px;
    }

    .stat-label {
      font-size: 11px;
      color: #6c757d;
      text-transform: uppercase;
      letter-spacing: 0.5px;
    }

    /* ë°˜ì‘í˜• */
    @media (max-width: 1200px) {
      .container {
        grid-template-columns: 1fr;
        gap: 30px;
      }

      .stats-grid {
        grid-template-columns: repeat(3, 1fr);
      }
    }

    @media (max-width: 768px) {
      .header {
        padding: 0 20px;
      }

      .container {
        padding: 20px 15px;
      }

      .section-header,
      .section-body,
      .form-actions {
        padding: 20px;
      }

      .form-actions {
        flex-direction: column-reverse;
      }

      .btn {
        width: 100%;
      }

      .list-controls {
        flex-direction: column;
        align-items: stretch;
      }

      .coupon-details {
        grid-template-columns: 1fr;
        gap: 10px;
      }

      .coupon-actions {
        justify-content: center;
      }

      .stats-grid {
        grid-template-columns: 1fr;
      }
    }
  </style>
</head>
<body>
<!-- ì‚¬ì´ë“œë°” ë ˆì´ì•„ì›ƒ í¬í•¨ -->
<div th:replace="~{layout/adminSidebar :: sidebar}"></div>

<!-- ë©”ì¸ ì»¨í…ì¸  -->
<div class="main-content">
  <!-- í—¤ë” -->
  <header class="header">
    <div class="header-actions">
      <div class="admin-info">
        ê´€ë¦¬ìë‹˜ í™˜ì˜í•©ë‹ˆë‹¤
      </div>
      <button class="logout-btn" onclick="logout()">
        Sign Out
      </button>
    </div>
  </header>

  <!-- ì»¨í…Œì´ë„ˆ -->
  <div class="container">
    <!-- í˜ì´ì§€ íƒ€ì´í‹€ -->
    <div class="page-title">
      <h2>ì¿ í° ê´€ë¦¬</h2>
      <p>ì¿ í°ì„ ìƒì„±í•˜ê³  ê´€ë¦¬í•©ë‹ˆë‹¤</p>
    </div>

    <!-- ì™¼ìª½: ì¿ í° ìƒì„± í¼ -->
    <div class="create-section">
      <form th:action="@{/admin/coupon/create}" th:object="${coupon}" method="post">
        <div class="section">
          <div class="section-header">
            <h3 class="section-title">ì¿ í° ìƒì„±</h3>
          </div>
          <div class="section-body">
            <div class="form-group">
              <label for="couponId">ì¿ í° ì•„ì´ë”” (xxxx-xxxx-xxxx)</label>
              <input type="text" id="couponId" name="couponId"
                     pattern="[a-zA-Z0-9]{4}-[a-zA-Z0-9]{4}-[a-zA-Z0-9]{4}"
                     title="4ì-4ì-4ìì˜ ì˜ë¬¸ ë˜ëŠ” ìˆ«ì ì¡°í•©" required>
              <div class="help-text">4ì-4ì-4ìì˜ ì˜ë¬¸ ë˜ëŠ” ìˆ«ì ì¡°í•©ìœ¼ë¡œ ì…ë ¥í•˜ì„¸ìš”</div>
            </div>

            <div class="form-group">
              <label>ì¿ í° ì´ë¦„</label>
              <input type="text" th:field="*{couponName}" placeholder="ì¿ í° ì´ë¦„ì„ ì…ë ¥í•˜ì„¸ìš”" required/>
            </div>

            <div class="form-group">
              <label>ì¿ í° ì„¤ëª…</label>
              <textarea th:field="*{couponDiscription}" placeholder="ì¿ í°ì— ëŒ€í•œ ìƒì„¸ ì„¤ëª…ì„ ì…ë ¥í•˜ì„¸ìš”" required></textarea>
            </div>

            <div class="form-group">
              <label>í• ì¸ ìœ í˜•</label>
              <select th:field="*{discountType}" required>
                <option value="">í• ì¸ ìœ í˜•ì„ ì„ íƒí•˜ì„¸ìš”</option>
                <option value="per">í¼ì„¼íŠ¸ (%) í• ì¸</option>
                <option value="amount">ì •ì•¡ í• ì¸</option>
              </select>
            </div>

            <div class="form-group">
              <label>í• ì¸ ê°’</label>
              <input type="number" th:field="*{discountValue}" min="0" placeholder="í• ì¸ ê°’ì„ ì…ë ¥í•˜ì„¸ìš”" required/>
              <div class="help-text">í¼ì„¼íŠ¸ í• ì¸ì˜ ê²½ìš° 1-100, ì •ì•¡ í• ì¸ì˜ ê²½ìš° ì› ë‹¨ìœ„ë¡œ ì…ë ¥</div>
            </div>

            <div class="form-group">
              <label>ìµœì†Œ ì£¼ë¬¸ ê¸ˆì•¡</label>
              <input type="number" th:field="*{minOrderPrice}" min="0" value="0" placeholder="ìµœì†Œ ì£¼ë¬¸ ê¸ˆì•¡ (ì›)"/>
              <div class="help-text">ì¿ í° ì‚¬ìš©ì„ ìœ„í•œ ìµœì†Œ ì£¼ë¬¸ ê¸ˆì•¡ì„ ì„¤ì •í•˜ì„¸ìš” (0ì›ì¸ ê²½ìš° ì œí•œ ì—†ìŒ)</div>
            </div>

            <div class="form-group">
              <label>ìµœëŒ€ í• ì¸ ê¸ˆì•¡</label>
              <input type="number" th:field="*{maxDiscount}" min="0" placeholder="ìµœëŒ€ í• ì¸ ê¸ˆì•¡ (ì›)"/>
              <div class="help-text">í¼ì„¼íŠ¸ í• ì¸ì˜ ê²½ìš° ìµœëŒ€ í• ì¸ ê¸ˆì•¡ì„ ì œí•œí•  ìˆ˜ ìˆìŠµë‹ˆë‹¤</div>
            </div>

            <div class="form-group">
              <label>ë°œê¸‰ ì‹œì‘ì¼</label>
              <input type="date" th:field="*{issuedAt}"/>
              <div class="help-text">ì¿ í° ë°œê¸‰ì„ ì‹œì‘í•  ë‚ ì§œë¥¼ ì„ íƒí•˜ì„¸ìš”</div>
            </div>

            <div class="form-group">
              <label>ë§Œë£Œì¼</label>
              <input type="date" th:field="*{expiredAt}"/>
              <div class="help-text">ì¿ í°ì˜ ì‚¬ìš© ë§Œë£Œì¼ì„ ì„ íƒí•˜ì„¸ìš”</div>
            </div>

            <div class="form-group">
              <label>ìë™ ë°œê¸‰ ì„¤ì •</label>
              <div class="checkbox-group" onclick="toggleCheckbox('isAutoIssue')">
                <input type="checkbox" th:field="*{isAutoIssue}" id="isAutoIssue"/>
                <label for="isAutoIssue">ìë™ ë°œê¸‰ ì—¬ë¶€</label>
              </div>
              <div class="help-text">ì²´í¬í•˜ë©´ ì¡°ê±´ì— ë§ëŠ” ê³ ê°ì—ê²Œ ìë™ìœ¼ë¡œ ì¿ í°ì´ ë°œê¸‰ë©ë‹ˆë‹¤</div>
            </div>
          </div>
        </div>

        <div class="section">
          <div class="form-actions">
            <button type="button" class="btn btn-secondary" onclick="history.back()">
              ì·¨ì†Œ
            </button>
            <button type="submit" class="btn btn-primary">
              ì¿ í° ìƒì„±
            </button>
          </div>
        </div>
      </form>
    </div>

    <!-- ì˜¤ë¥¸ìª½: ì¿ í° ë¦¬ìŠ¤íŠ¸ -->
    <div class="list-section">
      <!-- ì¿ í° ë¦¬ìŠ¤íŠ¸ ì„¹ì…˜ -->
      <div class="section">
        <div class="section-header">
          <h3 class="section-title">ì¿ í° ëª©ë¡</h3>
          <button class="btn btn-outline btn-sm" onclick="refreshCouponList()">
            ìƒˆë¡œê³ ì¹¨
          </button>
        </div>
        <div class="section-body">
          <!-- ê²€ìƒ‰ ë° í•„í„° -->
          <div class="list-controls">
            <div class="search-box">
              <input type="text" id="searchInput" th:value="${currentSearch}" placeholder="ì¿ í°ëª… ë˜ëŠ” IDë¡œ ê²€ìƒ‰..." onkeyup="searchCoupons()">
              <span class="search-icon">ğŸ”</span>
            </div>
          </div>

          <!-- ì¿ í° ë¦¬ìŠ¤íŠ¸ -->
          <div class="coupon-list" id="couponList">
            <div class="coupon-item" th:each="c : ${coupons}">
              <div class="coupon-header">
                <div>
                  <div class="coupon-title" th:text="${c.coupon_name}"></div>
                  <div class="coupon-id" th:text="${c.coupon_id}"></div>
                </div>
              </div>
              <div class="coupon-description" th:text="${c.coupon_discription}"></div>
              <div class="coupon-details">
                <div class="detail-item">
                  <span class="detail-label">í• ì¸:</span>
                  <span class="detail-value" th:text="${c.discount_type == 'per' ? c.discount_value + '%' : c.discount_value + 'ì›'}"></span>
                </div>
                <div class="detail-item">
                  <span class="detail-label">ìµœì†Œì£¼ë¬¸:</span>
                  <span class="detail-value" th:text="${#numbers.formatInteger(c.min_order_price, 3, 'COMMA')} + 'ì›'"></span>
                </div>
                <div class="detail-item">
                  <span class="detail-label">ìµœëŒ€í• ì¸:</span>
                  <span class="detail-value" th:text="${c['max_discount'] != null ? #numbers.formatInteger(c['max_discount'], 0, 'COMMA') + 'ì›' : 'ì œí•œì—†ìŒ'}"></span>
                </div>
                <div class="detail-item">
                  <span class="detail-label">ë§Œë£Œì¼:</span>
                  <span class="detail-value" th:text="${c['expired_at'] != null ? #dates.format(c['expired_at'], 'yyyy-MM-dd') : 'ë¬´ì œí•œ'}"></span>
                </div>
              </div>
            </div>
          </div>

          <!-- í˜ì´ì§€ë„¤ì´ì…˜ -->
          <div class="pagination">
            <button th:onclick="'changePage(0)'" th:disabled="${!hasPrevious}">â€¹â€¹</button>
            <button th:onclick="'changePage(' + ${currentPage - 1} + ')'" th:disabled="${!hasPrevious}">â€¹</button>

            <th:block th:each="i : ${#numbers.sequence(0, totalPages - 1)}">
              <button th:onclick="'changePage(' + ${i} + ')'"
                      th:classappend="${i == currentPage ? 'active' : ''}"
                      th:text="${i + 1}"></button>
            </th:block>

            <button th:onclick="'changePage(' + ${currentPage + 1} + ')'" th:disabled="${!hasNext}">â€º</button>
            <button th:onclick="'changePage(' + ${totalPages - 1} + ')'" th:disabled="${!hasNext}">â€ºâ€º</button>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>

<script>
  document.addEventListener('DOMContentLoaded', function() {
    // ì‚¬ì´ë“œë°” "ì¿ í° ìƒì„±" ë©”ë‰´ active ì„¤ì • ë° ì„œë¸Œë©”ë‰´ ì—´ê¸°
    const couponCreateLink = document.querySelector('a[href="/admin/coupon/create"]');
    if (couponCreateLink) {
      couponCreateLink.classList.add('active');

      // í• ì¸ ê´€ë¦¬ ì„œë¸Œë©”ë‰´ ìë™ìœ¼ë¡œ ì—´ê¸°
      const submenu = couponCreateLink.closest('.submenu');
      if (submenu) {
        submenu.style.display = 'block';

        // í• ì¸ ê´€ë¦¬ ë©”ì¸ ë§í¬ì—ë„ active í‘œì‹œ
        const parentNavLink = submenu.previousElementSibling;
        if (parentNavLink && parentNavLink.classList.contains('has-submenu')) {
          parentNavLink.classList.add('active');
        }
      }
    }

    // ì²´í¬ë°•ìŠ¤ ì´ˆê¸° ìƒíƒœ ì„¤ì •
    const autoIssueCheckbox = document.getElementById('isAutoIssue');
    const checkboxGroup = autoIssueCheckbox.closest('.checkbox-group');
    if (autoIssueCheckbox.checked) {
      checkboxGroup.classList.add('checked');
    }

    // ì´ˆê¸° í†µê³„ ì—…ë°ì´íŠ¸
    updateCouponStats();
  });

  // ì²´í¬ë°•ìŠ¤ í† ê¸€
  function toggleCheckbox(checkboxId) {
    const checkbox = document.getElementById(checkboxId);
    const group = checkbox.closest('.checkbox-group');

    checkbox.checked = !checkbox.checked;

    if (checkbox.checked) {
      group.classList.add('checked');
    } else {
      group.classList.remove('checked');
    }
  }

  // ì¿ í° ì•„ì´ë”” ìë™ í¬ë§·íŒ…
  document.getElementById('couponId')?.addEventListener('input', function (e) {
    let value = e.target.value.replace(/[^a-zA-Z0-9]/g, '');
    if (value.length > 12) value = value.slice(0, 12);
    let formatted = value.match(/.{1,4}/g)?.join('-') || '';
    e.target.value = formatted;
  });

  // ë‚ ì§œ ìœ íš¨ì„± ê²€ì‚¬
  document.querySelector('input[name="expiredAt"]')?.addEventListener('change', function() {
    const issuedAt = document.querySelector('input[name="issuedAt"]').value;
    const expiredAt = this.value;

    if (issuedAt && expiredAt && new Date(expiredAt) < new Date(issuedAt)) {
      alert('ë§Œë£Œì¼ì€ ë°œê¸‰ ì‹œì‘ì¼ë³´ë‹¤ ëŠ¦ì–´ì•¼ í•©ë‹ˆë‹¤.');
      this.value = '';
    }
  });

  // í• ì¸ ìœ í˜•ì— ë”°ë¥¸ ë„ì›€ë§ ì—…ë°ì´íŠ¸
  document.querySelector('select[name="discountType"]')?.addEventListener('change', function() {
    const helpText = document.querySelector('input[name="discountValue"]').nextElementSibling;
    if (this.value === 'per') {
      helpText.textContent = '1-100 ì‚¬ì´ì˜ í¼ì„¼íŠ¸ ê°’ì„ ì…ë ¥í•˜ì„¸ìš”';
    } else if (this.value === 'amount') {
      helpText.textContent = 'í• ì¸í•  ê¸ˆì•¡ì„ ì› ë‹¨ìœ„ë¡œ ì…ë ¥í•˜ì„¸ìš”';
    }
  });

  // ì¿ í° í†µê³„ ì—…ë°ì´íŠ¸
  function updateCouponStats() {
    // TODO: ë°±ì—”ë“œ API í˜¸ì¶œí•˜ì—¬ ì‹¤ì œ í†µê³„ ë°ì´í„° ê°€ì ¸ì˜¤ê¸°
    document.getElementById('totalCoupons').textContent = '15';
    document.getElementById('activeCoupons').textContent = '12';
    document.getElementById('expiredCoupons').textContent = '3';
  }

  // ì¿ í° ë¦¬ìŠ¤íŠ¸ ìƒˆë¡œê³ ì¹¨
  function refreshCouponList() {
    // TODO: ë°±ì—”ë“œ API í˜¸ì¶œí•˜ì—¬ ì¿ í° ëª©ë¡ ë‹¤ì‹œ ë¡œë“œ
    console.log('ì¿ í° ë¦¬ìŠ¤íŠ¸ ìƒˆë¡œê³ ì¹¨');
    updateCouponStats();
  }

  // ì¿ í° ê²€ìƒ‰
  function searchCoupons() {
    const searchTerm = document.getElementById('searchInput').value.toLowerCase();
    const couponItems = document.querySelectorAll('.coupon-item');

    couponItems.forEach(item => {
      const title = item.querySelector('.coupon-title').textContent.toLowerCase();
      const id = item.querySelector('.coupon-id').textContent.toLowerCase();

      if (title.includes(searchTerm) || id.includes(searchTerm)) {
        item.style.display = 'block';
      } else {
        item.style.display = 'none';
      }
    });
  }

  // ì¿ í° ìƒíƒœë³„ í•„í„°
  function filterCoupons() {
    const filterValue = document.getElementById('statusFilter').value;
    const couponItems = document.querySelectorAll('.coupon-item');

    couponItems.forEach(item => {
      const status = item.querySelector('.coupon-status');

      if (!filterValue) {
        item.style.display = 'block';
      } else if (status.classList.contains(`status-${filterValue}`)) {
        item.style.display = 'block';
      } else {
        item.style.display = 'none';
      }
    });
  }

  // ì¿ í° í¸ì§‘
  function editCoupon(couponId) {
    // TODO: ì¿ í° í¸ì§‘ ëª¨ë‹¬ ë˜ëŠ” í˜ì´ì§€ë¡œ ì´ë™
    console.log('ì¿ í° í¸ì§‘:', couponId);
    alert(`ì¿ í° í¸ì§‘ ê¸°ëŠ¥ - ID: ${couponId}`);
  }

  // ì¿ í° ìƒíƒœ í† ê¸€
  function toggleCouponStatus(couponId) {
    // TODO: ë°±ì—”ë“œ API í˜¸ì¶œí•˜ì—¬ ì¿ í° ìƒíƒœ ë³€ê²½
    console.log('ì¿ í° ìƒíƒœ ë³€ê²½:', couponId);
    if (confirm('ì¿ í° ìƒíƒœë¥¼ ë³€ê²½í•˜ì‹œê² ìŠµë‹ˆê¹Œ?')) {
      alert(`ì¿ í° ìƒíƒœ ë³€ê²½ë¨ - ID: ${couponId}`);
    }
  }

  // ì¿ í° ì‚­ì œ
  function deleteCoupon(couponId) {
    // TODO: ë°±ì—”ë“œ API í˜¸ì¶œí•˜ì—¬ ì¿ í° ì‚­ì œ
    if (confirm('ì •ë§ë¡œ ì´ ì¿ í°ì„ ì‚­ì œí•˜ì‹œê² ìŠµë‹ˆê¹Œ?')) {
      console.log('ì¿ í° ì‚­ì œ:', couponId);
      alert(`ì¿ í° ì‚­ì œë¨ - ID: ${couponId}`);
    }
  }

  // í˜ì´ì§€ ë³€ê²½
  function changePage(page) {
    const search = document.getElementById('searchInput').value;
    const status = document.getElementById('statusFilter').value;
    window.location.href = `/admin/coupon/create?page=${page}&search=${search}&status=${status}`;
  }

  // ë¡œê·¸ì•„ì›ƒ ì²˜ë¦¬
  function logout() {
    if (confirm('ë¡œê·¸ì•„ì›ƒ í•˜ì‹œê² ìŠµë‹ˆê¹Œ?')) {
      fetch('/admin/auth/logout', {
        method: 'POST'
      })
              .then(response => response.json())
              .then(data => {
                if (data.success) {
                  window.location.href = '/admin/login';
                }
              })
              .catch(error => {
                console.error('ë¡œê·¸ì•„ì›ƒ ì˜¤ë¥˜:', error);
                window.location.href = '/admin/login';
              });
    }
  }
</script>
</body>
</html>